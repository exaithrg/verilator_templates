<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ/Frequently Asked Questions &mdash; Verilator 4.210 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/vlt_sphinx.css" type="text/css" />
    <link rel="shortcut icon" href="_static/verilator_32x32_min.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Input Languages" href="languages.html" />
    <link rel="prev" title="Contributing and Reporting Bugs" href="contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #45acf8" >
            <a href="index.html">
            <img src="_static/verilator_192_150_min.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.210
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User's Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="verilating.html">Verilating</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting.html">Connecting to Verilated Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulating.html">Simulating (Verilated-Model Runtime)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing and Reporting Bugs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQ/Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#questions">Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#can-i-contribute">Can I contribute?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-widely-is-verilator-used">How widely is Verilator used?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#does-verilator-run-under-windows">Does Verilator run under Windows?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can-you-provide-binaries">Can you provide binaries?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-can-it-be-faster-than-name-a-big-3-closed-source-simulator">How can it be faster than (name-a-big-3-closed-source-simulator)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#will-verilator-output-remain-under-my-own-license-copyright">Will Verilator output remain under my own license/copyright?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-is-running-verilator-to-create-a-model-so-slow">Why is running Verilator (to create a model) so slow?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-generate-waveforms-traces-in-c">How do I generate waveforms (traces) in C++?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-generate-waveforms-traces-in-systemc">How do I generate waveforms (traces) in SystemC?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-generate-fst-waveforms-traces-in-c-or-systemc">How do I generate FST waveforms (traces) in C++ or SystemC?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-view-waveforms-aka-dumps-or-traces">How do I view waveforms (aka dumps or traces)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-speed-up-writing-large-waveform-trace-files">How do I speed up writing large waveform (trace) files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#where-is-the-translate-off-command-how-do-i-ignore-a-construct">Where is the translate_off command?  (How do I ignore a construct?)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-do-i-get-unexpected-do-or-unexpected-bit-errors">Why do I get “unexpected ‘do’” or “unexpected ‘bit’” errors?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-prevent-my-assertions-from-firing-during-reset">How do I prevent my assertions from firing during reset?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-do-i-get-undefined-reference-to-sc-time-stamp">Why do I get “undefined reference to sc_time_stamp()?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-do-i-get-undefined-reference-to-vl-rand-reset-i-or-verilated">Why do I get “undefined reference to `VL_RAND_RESET_I’ or `Verilated::…’”?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-the-pli-supported">Is the PLI supported?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-make-a-verilog-module-that-contain-a-c-object">How do I make a Verilog module that contain a C++ object?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-get-faster-build-times">How do I get faster build times?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-do-so-many-files-need-to-recompile-when-i-add-a-signal">Why do so many files need to recompile when I add a signal?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-access-verilog-functions-tasks-in-c">How do I access Verilog functions/tasks in C?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-access-c-functions-tasks-in-verilog">How do I access C++ functions/tasks in Verilog?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-access-signals-in-c">How do I access signals in C?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#should-a-module-be-in-verilog-or-systemc">Should a module be in Verilog or SystemC?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="languages.html">Input Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Language Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="executables.html">Executable and Argument Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="warnings.html">Errors and Warnings</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecations.html">Deprecations</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors and Origins</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Revision History</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #45acf8" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Verilator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>FAQ/Frequently Asked Questions</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/verilator/verilator/blob/master/docs/guide/faq.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq-frequently-asked-questions">
<h1>FAQ/Frequently Asked Questions<a class="headerlink" href="#faq-frequently-asked-questions" title="Permalink to this heading">¶</a></h1>
<section id="questions">
<h2>Questions<a class="headerlink" href="#questions" title="Permalink to this heading">¶</a></h2>
<section id="can-i-contribute">
<h3>Can I contribute?<a class="headerlink" href="#can-i-contribute" title="Permalink to this heading">¶</a></h3>
<p>Please contribute!  Just submit a pull request, or raise an issue to
discuss if looking for something to help on.  For more information see our
contributor agreement.</p>
</section>
<section id="how-widely-is-verilator-used">
<h3>How widely is Verilator used?<a class="headerlink" href="#how-widely-is-verilator-used" title="Permalink to this heading">¶</a></h3>
<p>Verilator is used by many of the largest silicon design companies, large
organizations such as CERN, and even by college student projects.</p>
<p>Verilator is one of the “big 4” simulators, meaning one of the 4 main
SystemVerilog simulators available, namely the closed-source products Synopsys
VCS (tm), Mentor Questa/ModelSim (tm), Cadence
Xcelium/Incisive/NC-Verilog/NC-Sim (tm), and the open-source Verilator.
The three closed-source offerings are often collectively called the “big 3”
simulators.</p>
</section>
<section id="does-verilator-run-under-windows">
<h3>Does Verilator run under Windows?<a class="headerlink" href="#does-verilator-run-under-windows" title="Permalink to this heading">¶</a></h3>
<p>Yes, using Cygwin.  Verilated output also compiles under Microsoft Visual
C++, but this is not tested every release.</p>
</section>
<section id="can-you-provide-binaries">
<h3>Can you provide binaries?<a class="headerlink" href="#can-you-provide-binaries" title="Permalink to this heading">¶</a></h3>
<p>You can install Verilator via the system package manager (apt, yum, etc.)
on many Linux distributions, including Debian, Ubuntu, SuSE, RedHat, and
others.  These packages are provided by the Linux distributions and
generally will lag the version of the mainline Verilator repository.  If no
binary package is available for your distribution, how about you set one
up?</p>
</section>
<section id="how-can-it-be-faster-than-name-a-big-3-closed-source-simulator">
<h3>How can it be faster than (name-a-big-3-closed-source-simulator)?<a class="headerlink" href="#how-can-it-be-faster-than-name-a-big-3-closed-source-simulator" title="Permalink to this heading">¶</a></h3>
<p>Generally, the implied part of the question is “… with all of the
manpower they can put into developing it.”</p>
<p>Most simulators have to be compliant with the complete IEEE 1364 (Verilog)
and IEEE 1800 (SystemVerilog) standards, meaning they have to be event
driven.  This prevents them from being able to reorder blocks and make
netlist-style optimizations, which are where most of the gains come from.</p>
<p>You should not be scared by non-compliance.  Your synthesis tool isn’t
compliant with the whole standard to start with, so your simulator need not
be either.  Verilator is closer to the synthesis interpretation, so this is
a good thing for getting working silicon.</p>
</section>
<section id="will-verilator-output-remain-under-my-own-license-copyright">
<h3>Will Verilator output remain under my own license/copyright?<a class="headerlink" href="#will-verilator-output-remain-under-my-own-license-copyright" title="Permalink to this heading">¶</a></h3>
<p>Yes, it’s just like using GCC on your programs; this is why Verilator uses
the “GNU <strong>Lesser</strong> Public License Version 3” instead of the more typical
“GNU Public License”.  See the licenses for details, but in brief, if you
change Verilator itself or the header files Verilator includes, you must
make the source code available under the GNU Lesser Public License.
However, Verilator output (the Verilated code) only “include”s the licensed
files, and so you are <strong>not</strong> required to open-source release any output
from Verilator.</p>
<p>You also have the option of using the Perl Artistic License, which again
does not require you to release your Verilog or generated code, and also
allows you to modify Verilator for internal use without distributing the
modified version.  But please contribute back to the community!</p>
<p>One limit is that you cannot under either license release a closed-source
Verilog simulation product incorporating Verilator. That is you can have a
commercial product, but must make the source code available.</p>
<p>As is standard with Open Source, contributions back to Verilator will be
placed under the Verilator copyright and LGPL/Artistic license.  Small test
cases will be released into the public domain so they can be used anywhere,
and large tests under the LGPL/Artistic, unless requested otherwise.</p>
</section>
<section id="why-is-running-verilator-to-create-a-model-so-slow">
<h3>Why is running Verilator (to create a model) so slow?<a class="headerlink" href="#why-is-running-verilator-to-create-a-model-so-slow" title="Permalink to this heading">¶</a></h3>
<p>Verilator may require more memory than the resulting simulator will
require, as Verilator internally creates all of the state of the resulting
generated simulator in order to optimize it.  If it takes more than a few
minutes or so (and you’re not using <a class="reference internal" href="exe_verilator.html#cmdoption-debug"><code class="xref std std-option docutils literal notranslate"><span class="pre">--debug</span></code></a> since debug mode is
disk bound), see if your machine is paging; most likely you need to run it
on a machine with more memory. Very large designs are known to have topped
64 GB resident set size.  Alternatively, see <a class="reference internal" href="verilating.html#hierarchical-verilation"><span class="std std-ref">Hierarchical Verilation</span></a>.</p>
</section>
<section id="how-do-i-generate-waveforms-traces-in-c">
<h3>How do I generate waveforms (traces) in C++?<a class="headerlink" href="#how-do-i-generate-waveforms-traces-in-c" title="Permalink to this heading">¶</a></h3>
<p>See also the next question for tracing in SystemC mode.</p>
<ol class="upperalpha">
<li><p>Pass the <a class="reference internal" href="exe_verilator.html#cmdoption-trace"><code class="xref std std-option docutils literal notranslate"><span class="pre">--trace</span></code></a> option to Verilator, and in your top level C
code, call <code class="docutils literal notranslate"><span class="pre">Verilated::traceEverOn(true)</span></code>.  Then you may use
<code class="docutils literal notranslate"><span class="pre">$dumpfile</span></code> and <code class="docutils literal notranslate"><span class="pre">$dumpvars</span></code> to enable traces, same as with any
Verilog simulator. See <code class="docutils literal notranslate"><span class="pre">examples/make_tracing_c</span></code> in the distribution.</p></li>
<li><p>Or, for finer-grained control, or C++ files with multiple Verilated
modules you may also create the trace purely from C++.  Create a
VerilatedVcdC object, and in your main loop right after <code class="docutils literal notranslate"><span class="pre">eval()</span></code> call
<code class="docutils literal notranslate"><span class="pre">trace_object-&gt;dump(contextp-&gt;time())</span></code> every time step, and finally
call <code class="docutils literal notranslate"><span class="pre">trace_object-&gt;close()</span></code>.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;verilated_vcd_c.h&quot;</span><span class="cp"></span>
</span><span class="p">...</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">VerilatedContext</span><span class="o">&gt;</span><span class="w"> </span><span class="n">contextp</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">VerilatedContext</span><span class="p">};</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="p">...</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">Verilated</span><span class="o">::</span><span class="n">traceEverOn</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">VerilatedVcdC</span><span class="o">*</span><span class="w"> </span><span class="n">tfp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">VerilatedVcdC</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">topp</span><span class="o">-&gt;</span><span class="n">trace</span><span class="p">(</span><span class="n">tfp</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">);</span><span class="w">  </span><span class="c1">// Trace 99 levels of hierarchy</span>
</span><span class="w">    </span><span class="n">tfp</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;obj_dir/t_trace_ena_cc/simx.vcd&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">contextp</span><span class="o">-&gt;</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">sim_time</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">contextp</span><span class="o">-&gt;</span><span class="n">gotFinish</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="hll"><span class="w">        </span><span class="n">contextp</span><span class="o">-&gt;</span><span class="n">timeInc</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</span><span class="w">        </span><span class="n">topp</span><span class="o">-&gt;</span><span class="n">eval</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">tfp</span><span class="o">-&gt;</span><span class="n">dump</span><span class="p">(</span><span class="n">contextp</span><span class="o">-&gt;</span><span class="n">time</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">tfp</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ol>
<p>You also need to compile <code class="file docutils literal notranslate"><span class="pre">verilated_vcd_c.cpp</span></code> and add it to your
link, preferably by adding the dependencies in your Makefile’s
<code class="code docutils literal notranslate"><span class="pre">$(VK_GLOBAL_OBJS)</span></code> link rule.  This is done for you if using the
Verilator <a class="reference internal" href="exe_verilator.html#cmdoption-exe"><code class="xref std std-option docutils literal notranslate"><span class="pre">--exe</span></code></a> option.</p>
<p>you can call <code class="code docutils literal notranslate"><span class="pre">trace_object-&gt;trace()</span></code> on multiple Verilated objects
with the same trace file if you want all data to land in the same output
file.</p>
</section>
<section id="how-do-i-generate-waveforms-traces-in-systemc">
<h3>How do I generate waveforms (traces) in SystemC?<a class="headerlink" href="#how-do-i-generate-waveforms-traces-in-systemc" title="Permalink to this heading">¶</a></h3>
<ol class="upperalpha">
<li><p>Pass the <a class="reference internal" href="exe_verilator.html#cmdoption-trace"><code class="xref std std-option docutils literal notranslate"><span class="pre">--trace</span></code></a> option to Verilator, and in your top level
<code class="code docutils literal notranslate"><span class="pre">sc_main()</span></code>, call <code class="code docutils literal notranslate"><span class="pre">Verilated::traceEverOn(true)</span></code>.  Then you
may use <code class="code docutils literal notranslate"><span class="pre">$dumpfile</span></code> and code:<cite>$dumpvars</cite> to enable traces, same as
with any Verilog simulator, see the non-SystemC example in
<code class="file docutils literal notranslate"><span class="pre">examples/make_tracing_c</span></code>. This will trace only the module
containing the <code class="code docutils literal notranslate"><span class="pre">$dumpvar</span></code>.</p></li>
<li><p>Or, you may create a trace purely from SystemC, which may trace all
Verilated designs in the SystemC model. Create a VerilatedVcdSc object
as you would create a normal SystemC trace file.  For an example, see
the call to <code class="docutils literal notranslate"><span class="pre">VerilatedVcdSc</span></code> in the
<code class="file docutils literal notranslate"><span class="pre">examples/make_tracing_sc/sc_main.cpp</span></code> file of the distribution,
and below.</p></li>
<li><p>Alternatively you may use the C++ trace mechanism described in the
previous question, note the timescale and timeprecision will be
inherited from your SystemC settings.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;verilated_vcd_sc.h&quot;</span><span class="cp"></span>
</span><span class="p">...</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="n">Verilated</span><span class="o">::</span><span class="n">traceEverOn</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">VerilatedVcdSc</span><span class="o">*</span><span class="w"> </span><span class="n">tfp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">VerilatedVcdSc</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">topp</span><span class="o">-&gt;</span><span class="n">trace</span><span class="p">(</span><span class="n">tfp</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">);</span><span class="w">  </span><span class="c1">// Trace 99 levels of hierarchy</span>
</span><span class="hll"><span class="w">    </span><span class="n">tfp</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;obj_dir/t_trace_ena_cc/simx.vcd&quot;</span><span class="p">);</span><span class="w"></span>
</span><span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">sc_start</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">tfp</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ol>
<p>You also need to compile <code class="file docutils literal notranslate"><span class="pre">verilated_vcd_sc.cpp</span></code> and
<code class="file docutils literal notranslate"><span class="pre">verilated_vcd_c.cpp</span></code> and add them to your link, preferably by adding
the dependencies in your Makefile’s <code class="code docutils literal notranslate"><span class="pre">$(VK_GLOBAL_OBJS)</span></code> link rule.
This is done for you if using the Verilator <a class="reference internal" href="exe_verilator.html#cmdoption-exe"><code class="xref std std-option docutils literal notranslate"><span class="pre">--exe</span></code></a> option.</p>
<p>You can call <code class="code docutils literal notranslate"><span class="pre">-&gt;trace()</span></code> on multiple Verilated objects with the same
trace file if you want all data to land in the same output file.</p>
<p>When using SystemC 2.3, the SystemC library must have been built with the
experimental simulation phase callback based tracing disabled. This is
disabled by default when building SystemC with its configure based build
system, but when building SystemC with CMake, you must pass
<code class="docutils literal notranslate"><span class="pre">-DENABLE_PHASE_CALLBACKS_TRACING=OFF</span></code> to disable this feature.</p>
</section>
<section id="how-do-i-generate-fst-waveforms-traces-in-c-or-systemc">
<h3>How do I generate FST waveforms (traces) in C++ or SystemC?<a class="headerlink" href="#how-do-i-generate-fst-waveforms-traces-in-c-or-systemc" title="Permalink to this heading">¶</a></h3>
<p>FST is a trace file format developed by GTKWave.  Verilator provides basic
FST support.  To dump traces in FST format, add the <a class="reference internal" href="exe_verilator.html#cmdoption-trace-fst"><code class="xref std std-option docutils literal notranslate"><span class="pre">--trace-fst</span></code></a>
option to Verilator and either A. use <code class="code docutils literal notranslate"><span class="pre">$dumpfile</span> <span class="pre">&amp;</span> <span class="pre">$dumpvars</span></code> in
Verilog as described in the VCD example above,</p>
<p>Or, in C++ change the include described in the VCD example above:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;verilated_fst_c.h&quot;</span><span class="cp"></span>
<span class="n">VerilatedFstC</span><span class="o">*</span><span class="w"> </span><span class="n">tfp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">VerilatedFstC</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Or, in SystemC change the include described in the VCD example above:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;verilated_fst_sc.h&quot;</span><span class="cp"></span>
<span class="n">VerilatedFstC</span><span class="o">*</span><span class="w"> </span><span class="n">tfp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">VerilatedFstSc</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Note that currently supporting both FST and VCD in a single simulation is
impossible, but such requirement should be rare.  You can however ifdef
around the trace format in your C++ main loop, and select VCD or FST at
build time, should you require.</p>
</section>
<section id="how-do-i-view-waveforms-aka-dumps-or-traces">
<h3>How do I view waveforms (aka dumps or traces)?<a class="headerlink" href="#how-do-i-view-waveforms-aka-dumps-or-traces" title="Permalink to this heading">¶</a></h3>
<p>Verilator creates standard VCD (Value Change Dump) and FST files.  VCD
files are viewable with the open source GTKWave (recommended) or Dinotrace
(legacy) programs, or any of the many closed-source offerings; FST is
supported only by GTKWave.</p>
</section>
<section id="how-do-i-speed-up-writing-large-waveform-trace-files">
<h3>How do I speed up writing large waveform (trace) files?<a class="headerlink" href="#how-do-i-speed-up-writing-large-waveform-trace-files" title="Permalink to this heading">¶</a></h3>
<ol class="upperalpha simple">
<li><p>Instead of calling <code class="docutils literal notranslate"><span class="pre">VerilatedVcdC-&gt;open</span></code> or <code class="docutils literal notranslate"><span class="pre">$dumpvars</span></code> at the
beginning of time, delay calling it until the time stamp where you want
tracing to begin.</p></li>
<li><p>Add the <a class="reference internal" href="extensions.html#cmdoption-verilator-32-tracing_off"><code class="xref std std-option docutils literal notranslate"><span class="pre">/*verilator&amp;32;tracing_off*/</span></code></a> metacomment to any very
low level modules you never want to trace (such as perhaps library
cells).</p></li>
<li><p>Use the <a class="reference internal" href="exe_verilator.html#cmdoption-trace-depth"><code class="xref std std-option docutils literal notranslate"><span class="pre">--trace-depth</span></code></a> option to limit the depth of tracing, for
example <a class="reference internal" href="exe_verilator.html#cmdoption-trace-depth"><code class="xref std std-option docutils literal notranslate"><span class="pre">--trace-depth</span> <span class="pre">1</span></code></a> to see only the top
level signals.</p></li>
<li><p>You can also consider using FST tracing instead of VCD. FST dumps are a
fraction of the size of the equivalent VCD. FST tracing can be slower
than VCD tracing, but it might be the only option if the VCD file size
is prohibitively large.</p></li>
<li><p>Be sure you write your trace files to a local solid-state drive, instead
of to a network drive.  Network drives are generally far slower.</p></li>
</ol>
</section>
<section id="where-is-the-translate-off-command-how-do-i-ignore-a-construct">
<h3>Where is the translate_off command?  (How do I ignore a construct?)<a class="headerlink" href="#where-is-the-translate-off-command-how-do-i-ignore-a-construct" title="Permalink to this heading">¶</a></h3>
<p>Translate on/off pragmas are generally a bad idea, as it’s easy to have
mismatched pairs, and you can’t see what another tool sees by just
preprocessing the code.  Instead, use the preprocessor; Verilator defines
the <code class="docutils literal notranslate"><span class="pre">\`VERILATOR</span></code> define for you, so just wrap the code in an ifndef
region:</p>
<blockquote>
<div><div class="highlight-sv notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="no">`ifndef</span><span class="w"> </span><span class="n">VERILATOR</span><span class="w"></span>
</span><span class="w">   </span><span class="n">Something_Verilator_Dislikes</span><span class="p">;</span><span class="w"></span>
<span class="no">`endif</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<p>Most synthesis tools similarly define SYNTHESIS for you.</p>
</section>
<section id="why-do-i-get-unexpected-do-or-unexpected-bit-errors">
<h3>Why do I get “unexpected ‘do’” or “unexpected ‘bit’” errors?<a class="headerlink" href="#why-do-i-get-unexpected-do-or-unexpected-bit-errors" title="Permalink to this heading">¶</a></h3>
<p>The words <code class="docutils literal notranslate"><span class="pre">do</span></code>, <code class="docutils literal notranslate"><span class="pre">bit</span></code>, <code class="docutils literal notranslate"><span class="pre">ref</span></code>, <code class="docutils literal notranslate"><span class="pre">return</span></code>, and others
are reserved keywords in SystemVerilog.  Older Verilog code might use these
as identifiers.  You should change your code to not use them to ensure it
works with newer tools.  Alternatively, surround them by the Verilog
2005/SystemVerilog begin_keywords pragma to indicate Verilog 2001 code.</p>
<div class="highlight-sv notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="no">`begin_keywords</span><span class="w"> </span><span class="s">&quot;1364-2001&quot;</span><span class="w"></span>
</span><span class="w">   </span><span class="kt">integer</span><span class="w"> </span><span class="kt">bit</span><span class="p">;</span><span class="w"> </span><span class="k">initial</span><span class="w"> </span><span class="kt">bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="no">`end_keywords</span><span class="w"></span>
</pre></div>
</div>
<p>If you want the whole design to be parsed as Verilog 2001, see the
<a class="reference internal" href="exe_verilator.html#cmdoption-default-language"><code class="xref std std-option docutils literal notranslate"><span class="pre">--default-language</span></code></a> option.</p>
</section>
<section id="how-do-i-prevent-my-assertions-from-firing-during-reset">
<h3>How do I prevent my assertions from firing during reset?<a class="headerlink" href="#how-do-i-prevent-my-assertions-from-firing-during-reset" title="Permalink to this heading">¶</a></h3>
<p>Call <code class="code docutils literal notranslate"><span class="pre">Verilated::assertOn(false)</span></code> before you first call the model,
then turn it back on after reset.  It defaults to true.  When false, all
assertions controlled by <a class="reference internal" href="exe_verilator.html#cmdoption-assert"><code class="xref std std-option docutils literal notranslate"><span class="pre">--assert</span></code></a> are disabled.</p>
</section>
<section id="why-do-i-get-undefined-reference-to-sc-time-stamp">
<h3>Why do I get “undefined reference to sc_time_stamp()?<a class="headerlink" href="#why-do-i-get-undefined-reference-to-sc-time-stamp" title="Permalink to this heading">¶</a></h3>
<p>In Verilator 4.200 and later, using the timeInc function is recommended
instead.  See the <a class="reference internal" href="connecting.html#connecting-to-c"><span class="std std-ref">Connecting to C++</span></a> examples.  Some linkers (MSVC++)
still require <code class="code docutils literal notranslate"><span class="pre">sc_time_stamp()</span></code> to be defined, either define this
with <code class="code docutils literal notranslate"><span class="pre">double</span> <span class="pre">sc_time_stamp()</span> <span class="pre">{</span> <span class="pre">return</span> <span class="pre">0;</span> <span class="pre">}</span></code> or compile the Verilated
code with <code class="code docutils literal notranslate"><span class="pre">-CFLAGS</span> <span class="pre">-DVL_TIME_CONTEXT</span></code>.</p>
<p>Prior to Verilator 4.200, the <code class="code docutils literal notranslate"><span class="pre">sc_time_stamp()</span></code> function needs to be
defined in C++ (non SystemC) to return the current simulation time.</p>
</section>
<section id="why-do-i-get-undefined-reference-to-vl-rand-reset-i-or-verilated">
<h3>Why do I get “undefined reference to `VL_RAND_RESET_I’ or `Verilated::…’”?<a class="headerlink" href="#why-do-i-get-undefined-reference-to-vl-rand-reset-i-or-verilated" title="Permalink to this heading">¶</a></h3>
<p>You need to link your compiled Verilated code against the
<code class="code docutils literal notranslate"><span class="pre">verilated.cpp</span></code> file found in the include directory of the Verilator
kit.  This is one target in the <code class="docutils literal notranslate"><span class="pre">$(VK_GLOBAL_OBJS)</span></code> make variable, which
should be part of your Makefile’s link rule.  If you use <a class="reference internal" href="exe_verilator.html#cmdoption-exe"><code class="xref std std-option docutils literal notranslate"><span class="pre">--exe</span></code></a>,
this is done for you.</p>
</section>
<section id="is-the-pli-supported">
<h3>Is the PLI supported?<a class="headerlink" href="#is-the-pli-supported" title="Permalink to this heading">¶</a></h3>
<p>Only somewhat.  More specifically, the common PLI-ish calls $display,
$finish, $stop, $time, $write are converted to C++ equivalents.  You can
also use the “import DPI” SystemVerilog feature to call C code (see the
chapter above).  There is also limited VPI access to public signals.</p>
<p>If you want something more complex, since Verilator emits standard C++
code, you can simply write your own C++ routines that can access and modify
signal values without needing any PLI interface code, and call it with
$c(“{any_c++_statement}”).</p>
<p>See the <a class="reference internal" href="connecting.html#connecting"><span class="std std-ref">Connecting to Verilated Models</span></a> section.</p>
</section>
<section id="how-do-i-make-a-verilog-module-that-contain-a-c-object">
<h3>How do I make a Verilog module that contain a C++ object?<a class="headerlink" href="#how-do-i-make-a-verilog-module-that-contain-a-c-object" title="Permalink to this heading">¶</a></h3>
<p>You need to add the object to the structure that Verilator creates, then
use $c to call a method inside your object.  The
<code class="file docutils literal notranslate"><span class="pre">test_regress/t/t_extend_class</span></code> files in the distribution show an
example of how to do this.</p>
</section>
<section id="how-do-i-get-faster-build-times">
<h3>How do I get faster build times?<a class="headerlink" href="#how-do-i-get-faster-build-times" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>When running make, pass the make variable VM_PARALLEL_BUILDS=1 so that
builds occur in parallel. Note this is now set by default if an output
file was large enough to be split due to the <a class="reference internal" href="exe_verilator.html#cmdoption-output-split"><code class="xref std std-option docutils literal notranslate"><span class="pre">--output-split</span></code></a>
option.</p></li>
<li><p>Verilator emits any infrequently executed “cold” routines into separate
__Slow.cpp files. This can accelerate compilation as optimization can be
disabled on these routines. See the OPT_FAST and OPT_SLOW make variables
and <a class="reference internal" href="simulating.html#benchmarking-optimization"><span class="std std-ref">Benchmarking &amp; Optimization</span></a>.</p></li>
<li><p>Use a recent compiler.  Newer compilers tend to be faster.</p></li>
<li><p>Compile in parallel on many machines and use caching; see the web for the
ccache, distcc and icecream packages. ccache will skip GCC runs between
identical source builds, even across different users.  If ccache was
installed when Verilator was built it is used, or see OBJCACHE
environment variable to override this. Also see the
<a class="reference internal" href="exe_verilator.html#cmdoption-output-split"><code class="xref std std-option docutils literal notranslate"><span class="pre">--output-split</span></code></a> option and :ref: <cite>Profiling ccache efficiency</cite></p></li>
<li><p>To reduce the compile time of classes that use a Verilated module (e.g. a
top CPP file) you may wish to add a
<a class="reference internal" href="extensions.html#cmdoption-verilator-32-no_inline_module"><code class="xref std std-option docutils literal notranslate"><span class="pre">/*verilator&amp;32;no_inline_module*/</span></code></a> metacomment to your top level
module. This will decrease the amount of code in the model’s Verilated
class, improving compile times of any instantiating top level C++ code,
at a relatively small cost of execution performance.</p></li>
<li><p>Use <a class="reference internal" href="verilating.html#hierarchical-verilation"><span class="std std-ref">Hierarchical Verilation</span></a>.</p></li>
</ul>
</section>
<section id="why-do-so-many-files-need-to-recompile-when-i-add-a-signal">
<h3>Why do so many files need to recompile when I add a signal?<a class="headerlink" href="#why-do-so-many-files-need-to-recompile-when-i-add-a-signal" title="Permalink to this heading">¶</a></h3>
<p>Adding a new signal requires the symbol table to be recompiled.  Verilator
uses one large symbol table, as that results in 2-3 less assembly
instructions for each signal access.  This makes the execution time 10-15%
faster, but can result in more compilations when something changes.</p>
</section>
<section id="how-do-i-access-verilog-functions-tasks-in-c">
<h3>How do I access Verilog functions/tasks in C?<a class="headerlink" href="#how-do-i-access-verilog-functions-tasks-in-c" title="Permalink to this heading">¶</a></h3>
<p>Use the SystemVerilog Direct Programming Interface.  You write a Verilog
function or task with input/outputs that match what you want to call in
with C.  Then mark that function as a DPI export function.  See the DPI
chapter in the IEEE Standard.</p>
</section>
<section id="how-do-i-access-c-functions-tasks-in-verilog">
<h3>How do I access C++ functions/tasks in Verilog?<a class="headerlink" href="#how-do-i-access-c-functions-tasks-in-verilog" title="Permalink to this heading">¶</a></h3>
<p>Use the SystemVerilog Direct Programming Interface.  You write a Verilog
function or task with input/outputs that match what you want to call in
with C.  Then mark that function as a DPI import function.  See the DPI
chapter in the IEEE Standard.</p>
</section>
<section id="how-do-i-access-signals-in-c">
<h3>How do I access signals in C?<a class="headerlink" href="#how-do-i-access-signals-in-c" title="Permalink to this heading">¶</a></h3>
<p>The best thing to do is to make a SystemVerilog “export DPI” task or
function that accesses that signal, as described in the DPI chapter in the
manual and DPI tutorials on the web.  This will allow Verilator to better
optimize the model and should be portable across simulators.</p>
<p>If you really want raw access to the signals, declare the signals you will
be accessing with a <a class="reference internal" href="extensions.html#cmdoption-2"><code class="xref std std-option docutils literal notranslate"><span class="pre">/*verilator&amp;32;public*/</span></code></a> metacomment before
the closing semicolon.  Then scope into the C++ class to read the value of
the signal, as you would any other member variable.</p>
<p>Signals are the smallest of 8-bit unsigned chars (equivalent to uint8_t),
16-bit unsigned shorts (uint16_t), 32-bit unsigned longs (uint32_t), or
64-bit unsigned long longs (uint64_t) that fits the width of the signal.
Generally, you can use just uint32_t’s for 1 to 32 bits, or vluint64_t for
1 to 64 bits, and the compiler will properly up-convert smaller entities.
Note even signed ports are declared as unsigned; you must sign extend
yourself to the appropriate signal width.</p>
<p>Signals wider than 64 bits are stored as an array of 32-bit uint32_t’s.
Thus to read bits 31:0, access signal[0], and for bits 63:32, access
signal[1].  Unused bits (for example bit numbers 65-96 of a 65-bit vector)
will always be zero.  If you change the value you must make sure to pack
zeros in the unused bits or core-dumps may result, because Verilator strips
array bound checks where it believes them to be unnecessary to improve
performance.</p>
<p>In the SYSTEMC example above, if you had in our.v:</p>
<blockquote>
<div><div class="highlight-sv notranslate"><div class="highlight"><pre><span></span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="w"> </span><span class="cm">/*verilator public*/</span><span class="p">;</span><span class="w"></span>
<span class="c1">// Note the placement of the semicolon above</span>
</pre></div>
</div>
</div></blockquote>
<p>From the sc_main.cpp file, you’d then:</p>
<blockquote>
<div><div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Vour.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Vour_our.h&quot;</span><span class="cp"></span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;clock is &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">top</span><span class="o">-&gt;</span><span class="n">our</span><span class="o">-&gt;</span><span class="n">clk</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<p>In this example, clk is a bool you can read or set as any other variable.
The value of normal signals may be set, though clocks shouldn’t be changed
by your code or you’ll get strange results.</p>
</section>
<section id="should-a-module-be-in-verilog-or-systemc">
<h3>Should a module be in Verilog or SystemC?<a class="headerlink" href="#should-a-module-be-in-verilog-or-systemc" title="Permalink to this heading">¶</a></h3>
<p>Sometimes there is a block that just interconnects instances, and have a
choice as to if you write it in Verilog or SystemC.  Everything else being
equal, best performance is when Verilator sees all of the design.  So, look
at the hierarchy of your design, labeling instances as to if they are
SystemC or Verilog.  Then:</p>
<ul class="simple">
<li><p>A module with only SystemC instances below must be SystemC.</p></li>
<li><p>A module with a mix of Verilog and SystemC instances below must be
SystemC. (As Verilator cannot connect to lower-level SystemC instances.)</p></li>
<li><p>A module with only Verilog instances below can be either, but for best
performance should be Verilog.  (The exception is if you have a design
that is instantiated many times; in this case Verilating one of the lower
modules and instantiating that Verilated instances multiple times into a
SystemC module <em>may</em> be faster.)</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="contributing.html" class="btn btn-neutral float-left" title="Contributing and Reporting Bugs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="languages.html" class="btn btn-neutral float-right" title="Input Languages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="copyright.html">Copyright</a> 2021 by Wilson Snyder, under LGPL-3.0 or Artistic-2.0.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D27B0C9QEB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-D27B0C9QEB', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>